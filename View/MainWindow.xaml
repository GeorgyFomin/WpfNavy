<Window x:Name="mainWnd" x:Class="WpfNavy.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:fa="http://schemas.awesome.incremented/wpf/xaml/fontawesome.sharp"
        xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
        xmlns:local="clr-namespace:WpfNavy"
        xmlns:viewmodels="clr-namespace:WpfNavy.ViewModels" d:DataContext="{d:DesignInstance Type=viewmodels:MainViewModel}"
        mc:Ignorable="d"
        Title="MainWindow" Height="450" Width="800" WindowStyle="None" ResizeMode="NoResize" Style="{StaticResource ResourceKey=BlackNavy}">
    <DockPanel Background="Transparent" >
        <DockPanel.Children>
            <DockPanel x:Name="topPanel" DockPanel.Dock="Top" Height="20" >
                <i:Interaction.Triggers>
                    <i:EventTrigger EventName="MouseLeftButtonDown">
                        <i:InvokeCommandAction Command="{Binding DragCommand}" CommandParameter="{Binding ElementName=mainWnd}"/>
                    </i:EventTrigger>
                </i:Interaction.Triggers>
                <TextBlock Foreground="LightGreen" VerticalAlignment="Center" Text = "Bank "/>
                <TextBlock x:Name="bankName" Foreground="LightGreen" VerticalAlignment="Center" Text= "{Binding BankName}" >
                    <TextBlock.ContextMenu>
                        <ContextMenu>
                            <MenuItem Header="Edit">
                                <TextBox Text="{Binding BankName}">
                                    <TextBox.ToolTip>
                                        Имя банка
                                    </TextBox.ToolTip>
                                </TextBox>
                            </MenuItem>
                        </ContextMenu>
                    </TextBlock.ContextMenu>
                </TextBlock>
                <StackPanel Orientation="Horizontal" FlowDirection="RightToLeft" >
                    <Button x:Name="CloseButton" Background="Transparent" BorderBrush="Transparent" Style="{StaticResource ButtonStyle1}">
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="Click">
                                <i:InvokeCommandAction Command="{Binding CloseCommand}" CommandParameter="{Binding ElementName=mainWnd}"/>
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                        <Button.Content>
                            <StackPanel>
                                <fa:IconBlock Width="20" Padding="0 3 0 0" Icon="WindowClose" Foreground="{StaticResource mainBtnColor}"/>
                            </StackPanel>
                        </Button.Content>
                    </Button>
                    <Button x:Name="Maximize" Background="Transparent" BorderBrush="Transparent">
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="Click">
                                <i:InvokeCommandAction Command="{Binding MaximizeCommand}" CommandParameter="{Binding ElementName=mainWnd}"/>
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                        <Button.Content>
                            <StackPanel>
                                <fa:IconBlock x:Name="MaxIconBlock" Width="20" Padding="0 3 0 0" Icon="WindowMaximize" Foreground="{StaticResource mainBtnColor}"/>
                            </StackPanel>
                        </Button.Content>
                    </Button>
                    <Button x:Name="Minimize" Background="Transparent" BorderBrush="Transparent">
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="Click">
                                <i:InvokeCommandAction Command="{Binding MinimizeCommand}" CommandParameter="{Binding ElementName=mainWnd}"/>
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                        <Button.Content>
                            <StackPanel>
                                <fa:IconBlock Width="20" Padding="0 3 0 0" Icon="WindowMinimize" Foreground="{StaticResource mainBtnColor}"/>
                            </StackPanel>
                        </Button.Content>
                    </Button>
                    <Button Foreground="{StaticResource mainBtnColor}" Background="Transparent" BorderBrush="Transparent" Content="Random Bank">
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="Click">
                                <i:InvokeCommandAction Command="{Binding ResetBankCommand}" CommandParameter="{Binding ElementName=mainWnd}"/>
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                    </Button>
                </StackPanel>
            </DockPanel>
            <Grid Background="Transparent">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width=".25*" x:Name="col0"/>
                    <ColumnDefinition Width=".5*" x:Name="col1"/>
                    <ColumnDefinition Width="*" x:Name="col2"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0" Text="Departments" Style="{StaticResource headerText}" />
                <TextBlock Grid.Column="1" Text="Clients" Style="{StaticResource headerText}" />
                <TextBlock Grid.Column="2" Text="Accounts" Style="{StaticResource headerText}"/>
                <ListView x:Name="depListView" Grid.Row="1" Style="{StaticResource listViewStyle}" ItemsSource="{Binding Deps}">
                    <!--ItemContainerStyle="{DynamicResource ListViewItemStyle1}"-->

                    <ListView.Resources>
                        <ContextMenu x:Key="ItemContextMenu">
                            <MenuItem Header="Edit">
                                <TextBox Text="{Binding ElementName=depNameColumn,Path=DisplayMemberBinding}"/>
                            </MenuItem>
                        </ContextMenu>
                    </ListView.Resources>
                    <ListView.ItemContainerStyle>
                        <Style TargetType="{x:Type ListViewItem}" BasedOn="{StaticResource ListViewItemStyle1}">
                            <Setter Property="ContextMenu" Value="{StaticResource ItemContextMenu}"/>
                        </Style>
                    </ListView.ItemContainerStyle>
                    <ListView.ContextMenu>
                        <ContextMenu>
                            <MenuItem Header="Add">
                                <i:Interaction.Triggers>
                                    <i:EventTrigger EventName="Click">
                                        <i:InvokeCommandAction Command="{Binding AddDepCommand}" CommandParameter="{Binding ElementName= mainWnd}"/>
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>
                            </MenuItem>
                        </ContextMenu>
                    </ListView.ContextMenu>
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="SelectionChanged">
                            <i:InvokeCommandAction Command="{Binding DepSelectedCommand}" CommandParameter="{Binding ElementName= mainWnd}"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                    <ListView.ToolTip>
                        <ToolTip  Style="{StaticResource ResourceKey=BlackNavy}">
                            Отделы
                        </ToolTip>
                    </ListView.ToolTip>
                    <ListView.View>
                        <GridView ColumnHeaderContainerStyle="{StaticResource ResourceKey=BlackNavy}">
                            <GridViewColumn x:Name="depNameColumn" Header="Name" DisplayMemberBinding="{Binding Name}">
                            </GridViewColumn>
                        </GridView>
                    </ListView.View>
                </ListView>
                <ListView x:Name="clientListView" Grid.Row="1" Grid.Column="1" ItemContainerStyle="{DynamicResource ListViewItemStyle1}" Style="{StaticResource listViewStyle}"
                           ItemsSource="{Binding Clients}">
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="SelectionChanged">
                            <i:InvokeCommandAction Command="{Binding ClientSelectedCommand}" CommandParameter="{Binding ElementName=mainWnd}"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                    <ListView.ToolTip>
                        <ToolTip Style="{StaticResource ResourceKey=BlackNavy}" >
                            Клиенты
                        </ToolTip>
                    </ListView.ToolTip>
                    <ListView.View>
                        <GridView ColumnHeaderContainerStyle="{StaticResource ResourceKey=BlackNavy}">
                            <GridViewColumn x:Name="ColClientName"  Header="Name" DisplayMemberBinding="{Binding Name}"/>
                        </GridView>
                    </ListView.View>
                </ListView>
                <ListView x:Name="accListView" Grid.Row="1" Grid.Column="2" Style="{StaticResource listViewStyle}" 
                          ItemContainerStyle="{DynamicResource ListViewItemStyle1}"
                         ItemsSource="{Binding Accounts}" >
                    <ListView.ToolTip>
                        <ToolTip Style="{StaticResource ResourceKey=BlackNavy}">
                            Счета
                        </ToolTip>
                    </ListView.ToolTip>
                    <ListView.View>
                        <GridView ColumnHeaderContainerStyle="{StaticResource ResourceKey=BlackNavy}">
                            <GridViewColumn Header="Number" DisplayMemberBinding="{Binding Number}"/>
                            <GridViewColumn Header="Size" DisplayMemberBinding="{Binding Size}"/>
                            <GridViewColumn Header="Rate" DisplayMemberBinding="{Binding Rate}"/>
                            <GridViewColumn Header="Cap" DisplayMemberBinding="{Binding Cap}"/>
                        </GridView>
                    </ListView.View>
                </ListView>
            </Grid>
        </DockPanel.Children>
    </DockPanel>
</Window>
